(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{2729:(e,t,a)=>{Promise.resolve().then(a.bind(a,5385))},2773:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},3349:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},5385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(5155),s=a(2204),d=a(7857),l=a(285),i=a(6695),n=a(2298),c=a(5317),o=a(6874),x=a.n(o),m=a(2115);function h(){let[e,t]=(0,m.useState)([]),[a,o]=(0,m.useState)(!0),[h,p]=(0,m.useState)(null),[u,f]=(0,m.useState)(null);async function y(){o(!0),p(null);try{let e=await (0,c.GG)((0,c.rJ)(n.db,"registrations"));t(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){p("Failed to load registrations.")}finally{o(!1)}}async function b(e,a){if(window.confirm("Are you sure you want to delete this registration? This cannot be undone.")){f(e);try{if(await (0,c.kd)((0,c.H9)(n.db,"registrations",e)),t(t=>t.filter(t=>t.id!==e)),a){let e=await fetch("/api/admin/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:a})});if(!e.ok){let t=await e.json();alert("Registration deleted, but failed to delete user: "+(t.error||e.statusText))}}}catch(e){alert("Failed to delete registration.")}finally{f(null)}}}return(0,m.useEffect)(()=>{y()},[]),(0,r.jsx)(s.AdminAuthGuard,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.AdminHeader,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)(i.Zp,{className:"shadow-xl",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-2xl font-bold",children:"All Registrations"})}),(0,r.jsx)(i.Wu,{children:a?(0,r.jsx)("div",{className:"text-center py-8",children:"Loading..."}):h?(0,r.jsx)("div",{className:"text-center text-destructive py-8",children:h}):0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No registrations found."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full border text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-muted",children:[(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Parent Name"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Email"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Facility"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Children"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Created"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"even:bg-muted/30",children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:e.parentName}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:e.parentEmail}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:e.facilityName||e.facilityId}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:Array.isArray(e.children)?e.children.join(", "):e.childName||"-"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,r.jsxs)("td",{className:"px-4 py-2 border-b flex gap-2",children:[(0,r.jsx)(x(),{href:"/admin/registrations/".concat(e.id),children:(0,r.jsx)(l.$,{size:"sm",variant:"outline",children:"Edit"})}),(0,r.jsx)(l.$,{size:"sm",variant:"destructive",onClick:()=>b(e.id,e.userId),disabled:u===e.id,children:u===e.id?"Deleting...":"Delete"})]})]},e.id))})]})})})]})})]})})}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>l,aR:()=>i});var r=a(5155),s=a(2115),d=a(9434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});n.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,380,537,470,441,684,358],()=>t(2729)),_N_E=e.O()}]);