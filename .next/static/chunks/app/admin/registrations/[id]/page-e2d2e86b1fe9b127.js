(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{2065:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(5155),l=r(2204),n=r(7857),i=r(285),s=r(6695),d=r(2298),c=r(5317),u=r(5695),o=r(2115);function m(){let e=(0,u.useRouter)(),a=(0,u.useParams)(),r=Array.isArray(null==a?void 0:a.id)?a.id[0]:null==a?void 0:a.id,[m,x]=(0,o.useState)(null),[h,f]=(0,o.useState)(!0),[p,y]=(0,o.useState)(null),[N,j]=(0,o.useState)(!1);async function v(a){if(a.preventDefault(),!r||"string"!=typeof r)return void y("Invalid registration ID.");j(!0),y(null);try{await (0,c.mZ)((0,c.H9)(d.db,"registrations",r),{parentName:m.parentName,parentEmail:m.parentEmail,facilityName:m.facilityName,children:m.children}),e.push("/admin/registrations")}catch(e){y("Failed to save changes.")}finally{j(!1)}}function g(e){let{name:a,value:r}=e.target;x(e=>({...e,[a]:r}))}return((0,o.useEffect)(()=>{async function e(){if(!r||"string"!=typeof r){y("Invalid registration ID."),f(!1);return}f(!0),y(null);try{let e=await (0,c.x7)((0,c.H9)(d.db,"registrations",r));e.exists()?x({id:e.id,...e.data()}):y("Registration not found.")}catch(e){y("Failed to load registration.")}finally{f(!1)}}r&&e()},[r]),h)?(0,t.jsx)(l.AdminAuthGuard,{children:(0,t.jsx)("div",{className:"text-center py-12",children:"Loading..."})}):p?(0,t.jsx)(l.AdminAuthGuard,{children:(0,t.jsx)("div",{className:"text-center text-destructive py-12",children:p})}):m?(0,t.jsx)(l.AdminAuthGuard,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.AdminHeader,{}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:(0,t.jsxs)(s.Zp,{className:"shadow-xl",children:[(0,t.jsx)(s.aR,{children:(0,t.jsx)(s.ZB,{className:"text-2xl font-bold",children:"Edit Registration"})}),(0,t.jsx)(s.Wu,{children:(0,t.jsxs)("form",{className:"space-y-4",onSubmit:v,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-medium mb-1",children:"Parent Name"}),(0,t.jsx)("input",{className:"w-full border rounded px-3 py-2",name:"parentName",value:m.parentName||"",onChange:g,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-medium mb-1",children:"Parent Email"}),(0,t.jsx)("input",{className:"w-full border rounded px-3 py-2",name:"parentEmail",value:m.parentEmail||"",onChange:g,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-medium mb-1",children:"Facility"}),(0,t.jsx)("input",{className:"w-full border rounded px-3 py-2",name:"facilityName",value:m.facilityName||"",onChange:g,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block font-medium mb-1",children:"Children (one per line)"}),(0,t.jsx)("textarea",{className:"w-full border rounded px-3 py-2",name:"children",value:Array.isArray(m.children)?m.children.join("\n"):m.children||"",onChange:e=>x(a=>({...a,children:e.target.value.split("\n")})),rows:Math.max(2,Array.isArray(m.children)?m.children.length:2)})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>e.push("/admin/registrations"),children:"Cancel"}),(0,t.jsx)(i.$,{type:"submit",disabled:N,children:N?"Saving...":"Save Changes"})]}),p&&(0,t.jsx)("div",{className:"text-destructive text-sm mt-2",children:p})]})})]})})]})}):null}},2773:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(157).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},3349:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6577:(e,a,r)=>{Promise.resolve().then(r.bind(r,2065))},6695:(e,a,r)=>{"use strict";r.d(a,{BT:()=>c,Wu:()=>u,ZB:()=>d,Zp:()=>i,aR:()=>s});var t=r(5155),l=r(2115),n=r(9434);let i=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...l})});i.displayName="Card";let s=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...l})});s.displayName="CardHeader";let d=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",r),...l})});c.displayName="CardDescription";let u=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",r),...l})});u.displayName="CardContent",l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",r),...l})}).displayName="CardFooter"}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,380,537,470,441,684,358],()=>a(6577)),_N_E=e.O()}]);