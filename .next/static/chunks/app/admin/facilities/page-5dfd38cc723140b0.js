(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{928:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(5155),i=a(2204),d=a(7857),l=a(2298),r=a(5317),n=a(3173),c=a(6874),h=a.n(c),o=a(5695),x=a(2115);function m(){let[e,s]=(0,x.useState)([]),[a,c]=(0,x.useState)([]),[m,p]=(0,x.useState)(!0),u=(0,o.useRouter)();async function f(a){confirm("Are you sure you want to delete this facility?")&&(await (0,r.kd)((0,r.H9)(l.db,"facilities",a)),s(e.filter(e=>e.id!==a)))}return(0,x.useEffect)(()=>{!async function(){p(!0);let e=(await (0,r.GG)((0,r.rJ)(l.db,"facilities"))).docs.map(e=>({id:e.id,...e.data()})),a=(await (0,r.GG)((0,r.rJ)(l.db,"classes"))).docs.map(e=>({id:e.id,...e.data()}));s(e),c(a),p(!1)}()},[]),(0,t.jsx)(i.AdminAuthGuard,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(d.AdminHeader,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-12",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary",children:"Manage Facilities"}),(0,t.jsx)(h(),{href:"/admin/facilities/new",className:"bg-primary text-primary-foreground px-4 py-2 rounded font-semibold hover:bg-primary/90 transition",children:"Add Facility"})]}),(0,t.jsxs)("div",{className:"bg-card rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"font-bold text-xl mb-4",children:"Facilities List"}),m?(0,t.jsx)("p",{children:"Loading..."}):0===e.length?(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No facilities found."}):(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-2",children:"Name"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Address"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Phone"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Registration Code"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Class-Session Pairs"}),(0,t.jsx)("th",{className:"text-left p-2",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,t.jsx)(n.A,{className:"h-5 w-5 text-primary"}),e.name]}),(0,t.jsx)("td",{className:"p-2",children:e.address}),(0,t.jsx)("td",{className:"p-2",children:e.phone}),(0,t.jsx)("td",{className:"p-2",children:e.registrationCode}),(0,t.jsx)("td",{className:"p-2 max-w-xs",children:(0,t.jsx)("div",{className:"text-xs",children:(s=e.availablePairs)&&0!==s.length?s.map(e=>{let s=a.find(s=>s.id===e.classId),t=s?s.name:"Unknown (".concat(e.classId,")");return"".concat(t," (").concat(e.sessionLength,"w)")}).join(", "):"No class-session pairs"})}),(0,t.jsxs)("td",{className:"p-2 flex gap-2",children:[(0,t.jsx)("button",{className:"bg-primary text-primary-foreground px-2 py-1 rounded hover:bg-primary/90",onClick:()=>u.push("/admin/facilities/".concat(e.id)),children:"Edit"}),(0,t.jsx)("button",{className:"bg-destructive text-destructive-foreground px-2 py-1 rounded hover:bg-destructive/80",onClick:()=>f(e.id),children:"Delete"})]})]},e.id)})})]})]})]})]})})}},2306:(e,s,a)=>{Promise.resolve().then(a.bind(a,928))},2773:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(157).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},3173:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(157).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3349:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,380,537,470,441,684,358],()=>s(2306)),_N_E=e.O()}]);