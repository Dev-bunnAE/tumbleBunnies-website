(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{2280:(e,a,r)=>{Promise.resolve().then(r.bind(r,3722))},2773:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});let n=(0,r(157).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},3349:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});let n=(0,r(157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3722:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var n=r(5155),s=r(2204),d=r(7857),i=r(2298),t=r(5317),l=r(6874),c=r.n(l),m=r(5695),o=r(2115);function h(){let[e,a]=(0,o.useState)(null),[r,l]=(0,o.useState)(!0),[h,u]=(0,o.useState)(!1),[x,p]=(0,o.useState)({name:"",description:"",price:0,enabled:!0}),b=(0,m.useParams)(),f=(0,m.useRouter)(),j=null==b?void 0:b.id;(0,o.useEffect)(()=>{!async function(){if(j){l(!0);try{let e=await (0,t.x7)((0,t.H9)(i.db,"merchandise",j));if(e.exists()){let r={id:e.id,...e.data()};a(r),p({name:r.name,description:r.description,price:r.price,enabled:r.enabled})}else alert("Merchandise not found"),f.push("/admin/merchandise")}catch(e){console.error("Error fetching merchandise:",e),alert("Error loading merchandise")}finally{l(!1)}}}()},[j,f]);let y=async a=>{if(a.preventDefault(),e&&x.name&&!(x.price<=0)){u(!0);try{await (0,t.mZ)((0,t.H9)(i.db,"merchandise",j),{name:x.name,description:x.description,price:x.price,enabled:x.enabled}),alert("Merchandise updated successfully"),f.push("/admin/merchandise")}catch(e){console.error("Error updating merchandise:",e),alert("Error updating merchandise")}finally{u(!1)}}};return r?(0,n.jsx)(s.AdminAuthGuard,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(d.AdminHeader,{}),(0,n.jsx)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:(0,n.jsx)("div",{className:"text-center",children:"Loading..."})})]})}):e?(0,n.jsx)(s.AdminAuthGuard,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(d.AdminHeader,{}),(0,n.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-8 text-center",children:"Edit Merchandise"}),(0,n.jsxs)("form",{onSubmit:y,className:"bg-card rounded-lg shadow-md p-6 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,n.jsx)("input",{className:"w-full p-2 border rounded",value:x.name,onChange:e=>p({...x,name:e.target.value}),placeholder:"Merchandise name",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,n.jsx)("textarea",{className:"w-full p-2 border rounded",value:x.description,onChange:e=>p({...x,description:e.target.value}),placeholder:"Description",rows:3})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Price *"}),(0,n.jsx)("input",{className:"w-full p-2 border rounded",type:"number",step:"0.01",min:"0.01",value:x.price||"",onChange:e=>p({...x,price:parseFloat(e.target.value)||0}),placeholder:"0.00",required:!0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Price must be greater than $0.00"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:x.enabled,onChange:e=>p({...x,enabled:e.target.checked}),id:"enabled"}),(0,n.jsx)("label",{htmlFor:"enabled",children:"Enabled"})]}),(0,n.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,n.jsx)("button",{type:"submit",className:"bg-primary text-primary-foreground px-4 py-2 rounded font-semibold flex-1 hover:bg-primary/90 disabled:opacity-50",disabled:h,children:h?"Saving...":"Update Merchandise"}),(0,n.jsx)(c(),{href:"/admin/merchandise",className:"bg-gray-500 text-white px-4 py-2 rounded font-semibold flex-1 text-center hover:bg-gray-600",children:"Cancel"})]})]})]})]})}):(0,n.jsx)(s.AdminAuthGuard,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(d.AdminHeader,{}),(0,n.jsx)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:(0,n.jsx)("div",{className:"text-center",children:"Merchandise not found"})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,380,537,470,441,684,358],()=>a(2280)),_N_E=e.O()}]);