(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{3330:(e,s,a)=>{"use strict";a.d(s,{U:()=>f});var t=a(5155),r=a(285),l=a(4838),i=a(4469),n=a(7481),c=a(2298),d=a(4815),o=a(1721),m=a(3349),x=a(6766),h=a(6874),u=a.n(h),p=a(5695);function f(){let{user:e,logout:s}=(0,c.useAuth)(),{items:a}=(0,i._)();(0,p.usePathname)();let h=(0,p.useRouter)(),{toast:f}=(0,n.dj)(),g=async()=>{try{await s(),f({title:"Logged Out",description:"You have been successfully logged out."}),h.push("/")}catch(e){f({variant:"destructive",title:"Logout Failed",description:"Please try again."})}},j=()=>a.reduce((e,s)=>e+s.quantity,0);return(0,t.jsx)("header",{className:"bg-background/95 backdrop-blur-sm sticky top-0 z-40 border-b shadow-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center h-16",children:[(0,t.jsxs)(u(),{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,t.jsx)(x.default,{src:"https://placehold.co/40x40.png",width:40,height:40,alt:"TumbleBunnies Logo","data-ai-hint":"bunny logo"}),(0,t.jsx)("span",{className:"font-headline text-2xl font-bold text-primary",children:"TumbleBunnies"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(r.$,{variant:"ghost",size:"icon",className:"relative cursor-pointer","aria-label":"Shopping Cart",onClick:()=>{console.log("Cart clicked, navigating to checkout..."),h.push("/checkout")},children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),j()>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground rounded-full h-5 w-5 text-xs flex items-center justify-center font-medium",children:j()})]}),e&&(0,t.jsxs)(l.rI,{children:[(0,t.jsx)(l.ty,{asChild:!0,children:(0,t.jsx)(r.$,{variant:"ghost",size:"icon","aria-label":"User Account",children:(0,t.jsx)(o.A,{className:"h-5 w-5"})})}),(0,t.jsxs)(l.SQ,{align:"end",className:"w-56",children:[(0,t.jsx)(l.lp,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:e.email}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:e.displayName||"User"})]})}),(0,t.jsx)(l.mB,{}),(0,t.jsx)(l._2,{asChild:!0,children:(0,t.jsxs)(u(),{href:"/account",className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),"My Profile"]})}),(0,t.jsx)(l._2,{asChild:!0,children:(0,t.jsxs)(u(),{href:"/orders",className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),"My Orders"]})}),(0,t.jsx)(l.mB,{}),(0,t.jsxs)(l._2,{onSelect:g,className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})})}},3864:(e,s,a)=>{"use strict";a.d(s,{k:()=>l});var t=a(5155);let r=e=>{let{className:s=""}=e;return(0,t.jsxs)("svg",{viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[(0,t.jsx)("ellipse",{cx:"32",cy:"48",rx:"18",ry:"10",fill:"#fff",stroke:"#a78bfa",strokeWidth:"2"}),(0,t.jsx)("ellipse",{cx:"22",cy:"20",rx:"6",ry:"16",fill:"#fff",stroke:"#a78bfa",strokeWidth:"2"}),(0,t.jsx)("ellipse",{cx:"42",cy:"20",rx:"6",ry:"16",fill:"#fff",stroke:"#a78bfa",strokeWidth:"2"}),(0,t.jsx)("ellipse",{cx:"32",cy:"38",rx:"12",ry:"10",fill:"#fff",stroke:"#a78bfa",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:"26",cy:"38",r:"2",fill:"#a78bfa"}),(0,t.jsx)("circle",{cx:"38",cy:"38",r:"2",fill:"#a78bfa"}),(0,t.jsx)("ellipse",{cx:"32",cy:"44",rx:"3",ry:"1.5",fill:"#a78bfa"})]})};function l(e){let{fullScreen:s}=e;return s?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,t.jsx)(r,{className:"h-24 w-24 animate-pulse"})}):(0,t.jsx)(r,{className:"h-10 w-10 animate-pulse"})}},5187:(e,s,a)=>{Promise.resolve().then(a.bind(a,9017))},9017:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>H});var t=a(5155),r=a(3864),l=a(3330),i=a(285),n=a(6695),c=a(2115),d=a(7820),o=a(518),m=a(9434);let x=c.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.bL,{ref:s,className:(0,m.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(d.C1,{className:(0,m.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(o.A,{className:"h-4 w-4"})})})});x.displayName=d.bL.displayName;var h=a(5821),u=a(5318);let p=h.bL;h.l9;let f=h.ZL;h.bm;let g=c.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(h.hJ,{ref:s,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});g.displayName=h.hJ.displayName;let j=c.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(f,{children:[(0,t.jsx)(g,{}),(0,t.jsxs)(h.UC,{ref:s,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,t.jsxs)(h.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=h.UC.displayName;let y=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};y.displayName="DialogHeader";let b=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};b.displayName="DialogFooter";let N=c.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(h.hE,{ref:s,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});N.displayName=h.hE.displayName;let v=c.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(h.VY,{ref:s,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})});function w(e){let{open:s,onOpenChange:a,children:r,className:l,sessionLength:n,price:d,onConfirm:o}=e,[m,h]=(0,c.useState)([]),u=e=>{h(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,t.jsx)(p,{open:s,onOpenChange:a,children:(0,t.jsxs)(j,{className:"sm:max-w-md",children:[(0,t.jsxs)(y,{children:[(0,t.jsx)(N,{children:"Select Children for Registration"}),(0,t.jsx)(v,{children:"Choose one or more children to register for this class session."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Class"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:l})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Session"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[n," week",n>1?"s":""," - $",d.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Select Children"}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:r.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(x,{checked:m.includes(e),onCheckedChange:()=>u(e),id:"child-checkbox-".concat(e)}),(0,t.jsx)("span",{className:"text-sm",children:e})]},e))})]})]}),(0,t.jsxs)(b,{children:[(0,t.jsx)(i.$,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,t.jsx)(i.$,{onClick:()=>{m.length>0&&(m.forEach(o),h([]),a(!1))},disabled:0===m.length,children:"Add to Cart"})]})]})})}v.displayName=h.VY.displayName;var k=a(4469),C=a(7481),A=a(2298),S=a(5317),L=a(5792),_=a(8510),z=a(1859),I=a(4601),R=a(8051),B=a(2733),U=a(8921),E=a(8098),P=a(9274),$=a(5242),T=a(4014),D=a(462),F=a(286),O=a(7648),W=a(6030),M=a(6766),Z=a(5695);function H(){let e=(0,Z.useRouter)(),s=(0,Z.useParams)(),a=Array.isArray(null==s?void 0:s.facilityId)?s.facilityId[0]:null==s?void 0:s.facilityId,{user:d,loading:o,getRegistrationAsync:m}=(0,A.useAuth)(),[x,h]=(0,c.useState)(null),[u,p]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[j,y]=(0,c.useState)(!0),[b,N]=(0,c.useState)(null),{addItem:v}=(0,k._)(),{toast:H}=(0,C.dj)(),[J,Y]=(0,c.useState)(!1),[G,V]=(0,c.useState)(null),[q,Q]=(0,c.useState)({});(0,c.useEffect)(()=>{async function s(){if(d&&a){y(!0);try{let s=await m(d.uid);if(!s||s.facilityId!==a)return void e.replace("/register");N(s);let t=await (0,S.x7)((0,S.H9)(A.db,"facilities",a));if(!t.exists())return void e.replace("/");let r={id:t.id,...t.data()};h(r);let l=r.availablePairs||[],i=Array.from(new Set(l.map(e=>e.classId))),n={};l.forEach(e=>{n[e.classId]||(n[e.classId]=[]),n[e.classId].push(e.sessionLength)}),Q(n);let c=await Promise.all(i.map(e=>(0,S.x7)((0,S.H9)(A.db,"classes",e))));p(c.filter(e=>e.exists()).map(e=>({id:e.id,...e.data()})).sort((e,s)=>e.name.localeCompare(s.name)));let o=(0,S.P)((0,S.rJ)(A.db,"merchandise"),(0,S._M)("enabled","==",!0)),x=await (0,S.GG)(o);g(x.docs.map(e=>({id:e.id,...e.data()})).sort((e,s)=>e.name.localeCompare(s.name)))}catch(s){console.error("Error fetching data:",s),e.replace("/register");return}finally{y(!1)}}}o||s()},[d,a,o,m,e]);let K=(e,s,a)=>{1===b.children.length?(v({id:"".concat(e.id,"-").concat(s),name:"".concat(e.name," (").concat(s," week").concat(s>1?"s":"",")"),price:a,childName:b.children[0],classId:e.id,sessionLength:s}),H({title:"Added to Cart",description:"".concat(e.name," (").concat(s," week").concat(s>1?"s":"",") added to your cart for ").concat(b.children[0],".")})):(V({cls:e,session:s,price:a}),Y(!0))},X=e=>{v({id:"merch-".concat(e.id),name:e.name,price:e.price,childName:"",classId:"",sessionLength:0}),H({title:"Added to Cart",description:"".concat(e.name," added to your cart.")})},ee=e=>{let s=e.toLowerCase();return s.includes("manifestation")?(0,t.jsx)(L.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("ballet")||s.includes("dance")||s.includes("hip hop")?(0,t.jsx)(_.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("gymnastics")?(0,t.jsx)(z.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("cheer")?(0,t.jsx)(I.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("karate")?(0,t.jsx)(R.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("art")?(0,t.jsx)(B.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("music")?(0,t.jsx)(U.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("yoga")?(0,t.jsx)(E.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("zumba")?(0,t.jsx)(P.A,{className:"h-12 w-12 text-primary","aria-label":e}):s.includes("all*sports")||s.includes("sports")?(0,t.jsx)($.A,{className:"h-12 w-12 text-primary","aria-label":e}):(0,t.jsx)(T.A,{className:"h-12 w-12 text-primary","aria-hidden":"true"})};return j||o?(0,t.jsx)(r.k,{fullScreen:!0}):x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.U,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-12",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-headline font-bold text-primary mb-4",children:x.name}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Discover amazing classes for your little ones! Choose from our variety of sessions and find the perfect fit for your family."})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(e=>(0,t.jsxs)(c.Fragment,{children:[(0,t.jsxs)(n.Zp,{className:"group hover:shadow-xl transition-all duration-300 border-primary/20 hover:border-primary/40 overflow-hidden",children:[(0,t.jsxs)(n.aR,{className:"pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"relative",children:[e.imageUrl?(0,t.jsx)(M.default,{src:e.imageUrl,alt:e.name,width:90,height:90,className:"h-10 w-10 object-cover rounded-lg border-2 border-primary bg-white shadow-md"}):ee(e.name),(0,t.jsx)("div",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:(0,t.jsx)(D.A,{className:"w-3 h-3"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(F.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Ages ",e.ageRange]})]})]}),(0,t.jsx)(n.ZB,{className:"text-2xl font-bold text-primary text-center group-hover:text-primary/80 transition-colors",children:e.name})]}),(0,t.jsx)(n.Wu,{className:"pt-0",children:(0,t.jsx)("div",{className:"space-y-3",children:(q[e.id]||[]).map(s=>{var a,r;let l=null==(r=x.pricing)||null==(a=r[e.id])?void 0:a[s];return null==l?null:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg p-4 border border-primary/20 hover:border-primary/40 transition-all duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"w-4 h-4 text-primary"}),(0,t.jsxs)("span",{className:"font-semibold text-primary",children:[s," week",s>1?"s":""]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["$",l.toFixed(2)]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"per session"})]})]}),(0,t.jsx)(i.$,{onClick:()=>K(e,s,l),className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold",size:"sm",children:"Add to Cart"})]},s)})})})]}),(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"Event",name:e.name,description:e.description||"TumbleBunnies class",startDate:"2024-09-01T09:00:00-05:00",location:{"@type":"Place",name:(null==x?void 0:x.name)||"TumbleBunnies Facility",address:(null==x?void 0:x.address)||"TumbleBunnies, Your City, USA"},image:e.imageUrl||void 0})}})]},e.id))}),f.length>0&&(0,t.jsxs)("div",{className:"mt-16",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-headline font-bold text-primary mb-4",children:"TumbleBunnies Merchandise"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Show your love for TumbleBunnies with our exclusive merchandise!"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f.map(e=>(0,t.jsxs)(n.Zp,{className:"group hover:shadow-xl transition-all duration-300 border-primary/20 hover:border-primary/40 overflow-hidden",children:[(0,t.jsxs)(n.aR,{className:"pb-4",children:[(0,t.jsx)("div",{className:"relative mb-4 flex justify-center items-center h-24",children:e.imageUrl?(0,t.jsx)(M.default,{src:e.imageUrl,alt:e.name,width:96,height:96,className:"w-full h-24 object-cover rounded-lg"}):(0,t.jsx)(W.A,{className:"h-16 w-16 text-primary","aria-hidden":"true"})}),(0,t.jsx)(n.ZB,{className:"text-xl font-bold text-primary text-center group-hover:text-primary/80 transition-colors",children:e.name})]}),(0,t.jsx)(n.Wu,{className:"pt-0",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:e.description}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-primary mb-3",children:["$",e.price.toFixed(2)]}),(0,t.jsx)(i.$,{onClick:()=>X(e),className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold",size:"sm",children:"Add to Cart"})]})]})})]},e.id))})]}),(0,t.jsx)("div",{className:"mt-16 text-center",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 rounded-2xl p-8 border-2 border-primary/20 hover:border-primary/40 transition-all duration-300",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-2xl font-headline font-bold text-primary mb-2",children:"Ready to Checkout?"}),(0,t.jsx)("p",{className:"text-muted-foreground text-lg",children:"Review your cart and complete your purchase"})]}),(0,t.jsx)(i.$,{onClick:()=>e.push("/checkout"),className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold text-lg px-8 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",size:"lg",children:"\uD83D\uDED2 Go to Checkout"})]})}),0===u.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("div",{className:"text-muted-foreground text-lg",children:"No classes available at this time. Please check back later!"})})]}),G&&(0,t.jsx)(w,{open:J,onOpenChange:Y,children:b.children,className:G.cls.name,sessionLength:G.session,price:G.price,onConfirm:e=>{G&&(v({id:"".concat(G.cls.id,"-").concat(G.session),name:"".concat(G.cls.name," (").concat(G.session," week").concat(G.session>1?"s":"",")"),price:G.price,childName:e,classId:G.cls.id,sessionLength:G.session}),H({title:"Added to Cart",description:"".concat(G.cls.name," (").concat(G.session," week").concat(G.session>1?"s":"",") added to your cart for ").concat(e,".")}))}})]}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,380,537,766,807,123,441,684,358],()=>s(5187)),_N_E=e.O()}]);