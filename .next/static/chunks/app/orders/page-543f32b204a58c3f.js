(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{3330:(e,s,t)=>{"use strict";t.d(s,{U:()=>j});var a=t(5155),r=t(285),l=t(4838),i=t(4469),c=t(7481),n=t(2298),d=t(4815),o=t(1721),x=t(3349),m=t(6766),h=t(6874),u=t.n(h),p=t(5695);function j(){let{user:e,logout:s}=(0,n.useAuth)(),{items:t}=(0,i._)();(0,p.usePathname)();let h=(0,p.useRouter)(),{toast:j}=(0,c.dj)(),g=async()=>{try{await s(),j({title:"Logged Out",description:"You have been successfully logged out."}),h.push("/")}catch(e){j({variant:"destructive",title:"Logout Failed",description:"Please try again."})}},y=()=>t.reduce((e,s)=>e+s.quantity,0);return(0,a.jsx)("header",{className:"bg-background/95 backdrop-blur-sm sticky top-0 z-40 border-b shadow-sm",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center h-16",children:[(0,a.jsxs)(u(),{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,a.jsx)(m.default,{src:"https://placehold.co/40x40.png",width:40,height:40,alt:"TumbleBunnies Logo","data-ai-hint":"bunny logo"}),(0,a.jsx)("span",{className:"font-headline text-2xl font-bold text-primary",children:"TumbleBunnies"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(r.$,{variant:"ghost",size:"icon",className:"relative cursor-pointer","aria-label":"Shopping Cart",onClick:()=>{console.log("Cart clicked, navigating to checkout..."),h.push("/checkout")},children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),y()>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground rounded-full h-5 w-5 text-xs flex items-center justify-center font-medium",children:y()})]}),e&&(0,a.jsxs)(l.rI,{children:[(0,a.jsx)(l.ty,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",size:"icon","aria-label":"User Account",children:(0,a.jsx)(o.A,{className:"h-5 w-5"})})}),(0,a.jsxs)(l.SQ,{align:"end",className:"w-56",children:[(0,a.jsx)(l.lp,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:e.email}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:e.displayName||"User"})]})}),(0,a.jsx)(l.mB,{}),(0,a.jsx)(l._2,{asChild:!0,children:(0,a.jsxs)(u(),{href:"/account",className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"My Profile"]})}),(0,a.jsx)(l._2,{asChild:!0,children:(0,a.jsxs)(u(),{href:"/orders",className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),"My Orders"]})}),(0,a.jsx)(l.mB,{}),(0,a.jsxs)(l._2,{onSelect:g,className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})})}},3349:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4815:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(157).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9e3:(e,s,t)=>{Promise.resolve().then(t.bind(t,9265))},9265:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(5155),r=t(3330),l=t(285),i=t(6695),c=t(2298),n=t(5317),d=t(4815),o=t(157);let x=(0,o.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),m=(0,o.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var h=t(1721),u=t(5695),p=t(2115);function j(){let{user:e}=(0,c.useAuth)(),[s,t]=(0,p.useState)([]),[o,j]=(0,p.useState)({}),[g,y]=(0,p.useState)(!0),f=(0,u.useRouter)();return((0,p.useEffect)(()=>{!async function(){if(!(null==e?void 0:e.email))return y(!1);try{y(!0);let s=(0,n.rJ)(c.db,"orders"),a=(0,n.P)(s,(0,n._M)("parentEmail","==",e.email)),r=(await (0,n.GG)(a)).docs.map(e=>({id:e.id,...e.data()}));r.sort((e,s)=>s.createdAt-e.createdAt),t(r);let l=(0,n.rJ)(c.db,"classes"),i=await (0,n.GG)(l),d={};i.docs.forEach(e=>{let s=e.data();d[e.id]=s.name}),j(d)}catch(e){console.error("Error fetching orders:",e)}finally{y(!1)}}()},[e]),e)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.U,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-4xl",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-2",children:"My Orders"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"View your class registrations and order history"}),(0,a.jsx)(l.$,{onClick:()=>f.push("/"),variant:"outline",className:"mt-2",children:"â† Back to Storefront"})]}),g?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading your orders..."})]}):0===s.length?(0,a.jsx)(i.Zp,{className:"shadow-lg",children:(0,a.jsxs)(i.Wu,{className:"text-center py-12",children:[(0,a.jsx)(d.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/50"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Orders Yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"You haven't placed any orders yet. Browse our classes and register your children!"}),(0,a.jsx)(l.$,{onClick:()=>f.push("/"),children:"Browse Classes"})]})}):(0,a.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,a.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5"}),"Order #",e.id.slice(-8).toUpperCase()]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x,{className:"w-4 h-4"}),new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),"$",e.totalAmount.toFixed(2)]}),(0,a.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("paid"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:e.items.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold text-primary",children:o[e.classId]||"Class (".concat(e.classId,")")}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["For ",e.childName]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.sessionLength," sessions"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"font-semibold",children:["$",e.price.toFixed(2)]})})]},s))})})]},e.id))})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.U,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-12 max-w-4xl",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-4",children:"My Orders"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-8",children:"Please log in to view your orders."}),(0,a.jsx)(l.$,{onClick:()=>f.push("/login"),children:"Log In"})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,380,537,766,123,441,684,358],()=>s(9e3)),_N_E=e.O()}]);