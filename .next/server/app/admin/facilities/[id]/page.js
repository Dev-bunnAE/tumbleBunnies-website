(()=>{var e={};e.id=60,e.ids=[60],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15292:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(60687),a=r(82276),i=r(98785),n=r(3456),l=r(75535),d=r(85814),o=r.n(d),c=r(16189),u=r(43210);function m(){let e=(0,c.useRouter)(),s=(0,c.useParams)();Array.isArray(s?.id)?s.id[0]:s?.id;let[r,d]=(0,u.useState)(null),[m,p]=(0,u.useState)([]),[x,h]=(0,u.useState)(!1),[b,f]=(0,u.useState)({classId:"",sessionLength:5});function v(e){if(!r)return;let{name:s,value:t}=e.target;d(e=>e&&{...e,[s]:t})}async function g(s){if(s.preventDefault(),!r)return;h(!0);let{id:t,...a}=r;await (0,l.mZ)((0,l.H9)(n.db,"facilities",t),a),h(!1),e.push("/admin/facilities")}return r?(0,t.jsx)(a.AdminAuthGuard,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(i.AdminHeader,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-4xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-8 text-center",children:"Edit Facility"}),(0,t.jsxs)("form",{className:"bg-card rounded-lg shadow-md p-6 space-y-4",onSubmit:g,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Facility Name"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"name",placeholder:"Enter facility name",value:r.name,onChange:v,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"address",placeholder:"Enter facility address",value:r.address,onChange:v,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"phone",placeholder:"Enter phone number",value:r.phone,onChange:v,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Registration Code"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"registrationCode",placeholder:"Enter registration code",value:r.registrationCode,onChange:v,required:!0})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Class-Session Pairs"}),(0,t.jsx)("div",{className:"space-y-2 mb-2",children:0===r.availablePairs.length?(0,t.jsx)("span",{className:"text-muted-foreground",children:"No pairs added."}):r.availablePairs.map((e,s)=>{let r=m.find(s=>s.id===e.classId)?.name||e.classId;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{children:[r," â€“ ",e.sessionLength," weeks"]}),(0,t.jsx)("button",{type:"button",className:"text-destructive underline text-xs",onClick:()=>{d(e=>e&&{...e,availablePairs:e.availablePairs.filter((e,r)=>r!==s)})},children:"Remove"})]},s)})}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsxs)("select",{className:"p-2 border rounded",value:b.classId,onChange:e=>f(s=>({...s,classId:e.target.value})),children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Class"}),m.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("select",{className:"p-2 border rounded",value:b.sessionLength,onChange:e=>f(s=>({...s,sessionLength:Number(e.target.value)})),children:[5,6,7,8].map(e=>(0,t.jsxs)("option",{value:e,children:[e," weeks"]},e))}),(0,t.jsx)("button",{type:"button",className:"bg-primary text-primary-foreground px-2 py-1 rounded",onClick:()=>{!b.classId||r.availablePairs.some(e=>e.classId===b.classId&&e.sessionLength===b.sessionLength)||d(e=>e&&{...e,availablePairs:[...e.availablePairs,{...b}]})},children:"Add Pair"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Pricing Matrix"}),0===r.availablePairs.length?(0,t.jsx)("span",{className:"text-muted-foreground",children:"Add at least one class-session pair to set pricing."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-2 border-b bg-muted",children:"Class"}),(0,t.jsx)("th",{className:"p-2 border-b bg-muted",children:"Session Length"}),(0,t.jsx)("th",{className:"p-2 border-b bg-muted",children:"Price"})]})}),(0,t.jsx)("tbody",{children:r.availablePairs.map(e=>{let s=m.find(s=>s.id===e.classId)?.name||e.classId;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-2 border-r font-semibold",children:s}),(0,t.jsxs)("td",{className:"p-2 border-r",children:[e.sessionLength," weeks"]}),(0,t.jsx)("td",{className:"p-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"$"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-24 p-1 border rounded",placeholder:"0.00",value:r.pricing?.[e.classId]?.[e.sessionLength]??"",onChange:s=>(function(e,s,t){if(!r)return;let a=""===t?0:Number(t);d(r=>r?{...r,pricing:{...r.pricing,[e]:{...r.pricing[e],[s]:a}}}:r)})(e.classId,e.sessionLength,s.target.value)})]})})]},e.classId+"-"+e.sessionLength)})})]})})]}),(0,t.jsx)("button",{className:"bg-primary text-primary-foreground px-4 py-2 rounded font-semibold w-full disabled:opacity-50",type:"submit",disabled:x,children:x?"Saving...":"Save Changes"})]}),(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)(o(),{href:"/admin/facilities",className:"text-primary hover:underline",children:"Back to Facilities"})})]})]})}):(0,t.jsx)(a.AdminAuthGuard,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(i.AdminHeader,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-8 text-center",children:"Edit Facility"}),(0,t.jsx)("p",{children:"Loading..."})]})]})})}},15330:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/[id]/page.tsx","default")},18031:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var t=r(65239),a=r(48088),i=r(88170),n=r.n(i),l=r(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let o={children:["",{children:["admin",{children:["facilities",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15330)),"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/[id]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/[id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/facilities/[id]/page",pathname:"/admin/facilities/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},20116:(e,s,r)=>{Promise.resolve().then(r.bind(r,15292))},21820:e=>{"use strict";e.exports=require("os")},27225:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(82614).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},44084:(e,s,r)=>{Promise.resolve().then(r.bind(r,15330))},49497:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(82614).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,842,208,121,473],()=>r(18031));module.exports=t})();