(()=>{var e={};e.id=335,e.ids=[335],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3831:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var t=r(65239),a=r(48088),i=r(88170),n=r.n(i),l=r(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let o={children:["",{children:["admin",{children:["facilities",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65435)),"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/new/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/new/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/facilities/new/page",pathname:"/admin/facilities/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},26025:(e,s,r)=>{Promise.resolve().then(r.bind(r,91525))},27225:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(82614).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35753:(e,s,r)=>{Promise.resolve().then(r.bind(r,65435))},37366:e=>{"use strict";e.exports=require("dns")},49497:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(82614).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65435:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/new/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/facilities/new/page.tsx","default")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91525:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var t=r(60687),a=r(82276),i=r(98785),n=r(3456),l=r(75535),d=r(85814),o=r.n(d),c=r(16189),u=r(43210);function p(){let[e,s]=(0,u.useState)({name:"",address:"",phone:"",registrationCode:"",availablePairs:[],pricing:{}}),[r,d]=(0,u.useState)([]),[p,m]=(0,u.useState)({classId:"",sessionLength:5}),[h,x]=(0,u.useState)(!1),b=(0,c.useRouter)();function g(e){let{name:r,value:t,type:a}=e.target;if("checkbox"===a&&"sessionLengths"===r){let r=e.target.checked;s(e=>({...e,sessionLengths:r?[...e.sessionLengths,Number(t)]:e.sessionLengths.filter(e=>e!==Number(t))}))}else if("checkbox"===a&&"classIds"===r){let r=e.target.checked;s(e=>({...e,classIds:r?[...e.classIds,t]:e.classIds.filter(e=>e!==t)}))}else"phone"===r?s(e=>({...e,phone:function(e){let s=e.replace(/\D/g,"").match(/^(\d{0,3})(\d{0,3})(\d{0,4})$/);if(!s)return e;let r="";return s[1]&&(r=`(${s[1]}`),s[2]&&(r+=3===s[2].length?`) ${s[2]}`:s[2]),s[3]&&(r+=s[3]?`-${s[3]}`:""),r}(t)})):s(e=>({...e,[r]:t}))}async function f(s){s.preventDefault(),x(!0);try{await (0,l.gS)((0,l.rJ)(n.db,"facilities"),e),await b.push("/admin/facilities")}catch(e){alert("Failed to save facility. Please try again."),x(!1)}}return(0,t.jsx)(a.AdminAuthGuard,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(i.AdminHeader,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-8 text-center",children:"Add Facility"}),(0,t.jsxs)("form",{className:"bg-card rounded-lg shadow-md p-6 space-y-4",onSubmit:f,children:[(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"name",placeholder:"Facility Name",value:e.name,onChange:g,required:!0}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"address",placeholder:"Address",value:e.address,onChange:g,required:!0}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"phone",placeholder:"Phone Number",value:e.phone,onChange:g,required:!0}),(0,t.jsx)("input",{className:"w-full p-2 border rounded",name:"registrationCode",placeholder:"Registration Code",value:e.registrationCode,onChange:g,required:!0}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Class-Session Pairs"}),(0,t.jsx)("div",{className:"space-y-2 mb-2",children:0===e.availablePairs.length?(0,t.jsx)("span",{className:"text-muted-foreground",children:"No pairs added."}):e.availablePairs.map((e,a)=>{let i=r.find(s=>s.id===e.classId)?.name||e.classId;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{children:[i," â€“ ",e.sessionLength," weeks"]}),(0,t.jsx)("button",{type:"button",className:"text-destructive underline text-xs",onClick:()=>{s(e=>e&&{...e,availablePairs:e.availablePairs.filter((e,s)=>s!==a)})},children:"Remove"})]},a)})}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsxs)("select",{className:"p-2 border rounded",value:p.classId,onChange:e=>m(s=>({...s,classId:e.target.value})),children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Class"}),r.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("select",{className:"p-2 border rounded",value:p.sessionLength,onChange:e=>m(s=>({...s,sessionLength:Number(e.target.value)})),children:[5,6,7,8].map(e=>(0,t.jsxs)("option",{value:e,children:[e," weeks"]},e))}),(0,t.jsx)("button",{type:"button",className:"bg-primary text-primary-foreground px-2 py-1 rounded",onClick:()=>{!p.classId||e.availablePairs.some(e=>e.classId===p.classId&&e.sessionLength===p.sessionLength)||s(e=>e&&{...e,availablePairs:[...e.availablePairs,{...p}]})},children:"Add Pair"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Pricing Matrix"}),0===e.availablePairs.length?(0,t.jsx)("span",{className:"text-muted-foreground",children:"Add at least one class-session pair to set pricing."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-2 border-b bg-muted",children:"Class"}),(0,t.jsx)("th",{className:"p-2 border-b bg-muted",children:"Session Length"}),(0,t.jsx)("th",{className:"p-2 border-b bg-muted",children:"Price"})]})}),(0,t.jsx)("tbody",{children:e.availablePairs.map(a=>{let i=r.find(e=>e.id===a.classId)?.name||a.classId;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-2 border-r font-semibold",children:i}),(0,t.jsxs)("td",{className:"p-2 border-r",children:[a.sessionLength," weeks"]}),(0,t.jsx)("td",{className:"p-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"$"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-24 p-1 border rounded",placeholder:"0.00",value:e.pricing?.[a.classId]?.[a.sessionLength]??"",onChange:e=>(function(e,r,t){let a=""===t?"":Number(t);s(s=>({...s,pricing:{...s.pricing,[e]:{...s.pricing[e]||{},[r]:a}}}))})(a.classId,a.sessionLength,e.target.value)})]})})]},a.classId+"-"+a.sessionLength)})})]})})]}),(0,t.jsx)("button",{className:"bg-primary text-primary-foreground px-4 py-2 rounded font-semibold w-full disabled:opacity-50",type:"submit",disabled:h,children:h?"Saving...":"Save Facility"})]}),(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)(o(),{href:"/admin/facilities",className:"text-primary hover:underline",children:"Back to Facilities"})})]})]})})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,842,208,121,473],()=>r(3831));module.exports=t})();