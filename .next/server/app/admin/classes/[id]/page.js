(()=>{var e={};e.id=149,e.ids=[149],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10087:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["admin",{children:["classes",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54037)),"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/classes/[id]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/classes/[id]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/classes/[id]/page",pathname:"/admin/classes/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17276:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(60687),a=r(82276),n=r(98785),i=r(3456),l=r(75535),o=r(70146),d=r(49587),u=r.n(d),c=r(30474),m=r(85814),p=r.n(m),x=r(16189),f=r(43210),h=r(47473);let g=u()(async()=>{},{loadableGenerated:{modules:["app/admin/classes/[id]/page.tsx -> @mui/icons-material/PhotoCamera"]},ssr:!1}),b=u()(async()=>{},{loadableGenerated:{modules:["app/admin/classes/[id]/page.tsx -> @mui/material/CircularProgress"]},ssr:!1}),j=u()(async()=>{},{loadableGenerated:{modules:["app/admin/classes/[id]/page.tsx -> @mui/material/Slider"]},ssr:!1}),v=["All Ages","0-1","2-3","4-5","6-7","8-10","11-13"];function y(){let e=(0,x.useRouter)(),t=(0,x.useParams)();Array.isArray(t?.id)?t.id[0]:t?.id;let[r,d]=(0,f.useState)(null),[u,m]=(0,f.useState)(!1),[y,w]=(0,f.useState)(""),[P,C]=(0,f.useState)(null),[_,N]=(0,f.useState)({x:0,y:0}),[q,A]=(0,f.useState)(1),[R,k]=(0,f.useState)(!1),S=(0,f.useRef)(null),[U,E]=(0,f.useState)(""),[O,G]=(0,f.useState)(!1);function D(e){if(!r)return;let{name:t,value:s}=e.target;d(e=>e&&{...e,[t]:s})}async function M(){if(y&&P){G(!0),E("");try{console.log("Starting image upload...");let e=await new Promise((e,t)=>{let r=new window.Image;r.crossOrigin="anonymous",r.src=y,r.onload=()=>{let s=document.createElement("canvas");s.width=400,s.height=400;let a=s.getContext("2d");if(!a)return t(Error("Canvas context is null"));let n=r.width/r.naturalWidth,i=P.x*n,l=P.y*n;a.drawImage(r,i,l,P.width*n,P.height*n,0,0,400,400),s.toBlob(r=>{if(!r)return void t(Error("Canvas is empty"));e(r)},"image/jpeg",.95)},r.onerror=e=>t(e)});console.log("Image cropped, blob size:",e.size);let t=(0,o.c7)(),r=(0,o.KR)(t,`class-images/${Date.now()}.jpg`);console.log("Uploading to Firebase Storage..."),await (0,o.D)(r,e),console.log("Upload completed, getting download URL...");let s=await (0,o.qk)(r);console.log("Download URL obtained:",s),d(e=>e&&{...e,imageUrl:s}),k(!1)}catch(e){console.error("Upload error:",e),E(`Failed to upload image: ${e instanceof Error?e.message:"Unknown error"}`)}G(!1)}}async function B(t){if(t.preventDefault(),!r?.imageUrl)return void E("Please upload and crop a class image.");m(!0);let{id:s,...a}=r;await (0,l.mZ)((0,l.H9)(i.db,"classes",s),a),m(!1),e.push("/admin/classes")}return r?(0,s.jsx)(a.AdminAuthGuard,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(n.AdminHeader,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-8 text-center",children:"Edit Class"}),(0,s.jsxs)("form",{className:"bg-card rounded-lg shadow-md p-6 space-y-4",onSubmit:B,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Class Name"}),(0,s.jsx)("input",{className:"w-full p-2 border rounded",name:"name",placeholder:"Class Name",value:r.name,onChange:D,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,s.jsx)("textarea",{className:"w-full p-2 border rounded",name:"description",placeholder:"Enter a description for this class",value:r.description||"",onChange:D,rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Age Range"}),(0,s.jsxs)("select",{className:"w-full p-2 border rounded",name:"ageRange",value:r.ageRange||"",onChange:D,required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select Age Range"}),v.map(e=>(0,s.jsx)("option",{value:e,children:"All Ages"===e?"All Ages":e+" years"},e))]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Class Image"}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/jpeg,image/png",ref:S,onChange:function(e){let t;if(E(""),"dataTransfer"in e&&e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length>0?t=e.dataTransfer.files[0]:"target"in e&&e.target&&e.target.files&&e.target.files.length>0&&(t=e.target.files[0]),!t)return;if(!["image/jpeg","image/png"].includes(t.type))return void E("Only JPEG and PNG images are allowed.");if(t.size>0xa00000)return void E("Image must be less than 10MB.");let r=new FileReader;r.addEventListener("load",()=>{w(r.result),k(!0)}),r.readAsDataURL(t)},className:"hidden"}),(0,s.jsxs)("button",{type:"button",className:"bg-primary text-primary-foreground px-4 py-2 rounded font-semibold",onClick:()=>S.current?.click(),children:[(0,s.jsx)(g,{className:"inline mr-2"})," Upload Image"]}),r.imageUrl&&(0,s.jsx)(c.default,{src:r.imageUrl,alt:"Class image",width:64,height:64,className:"h-16 w-16 object-cover rounded"})]}),U&&(0,s.jsx)("p",{className:"text-destructive text-sm mt-2",children:U}),R&&(0,s.jsxs)("div",{className:"relative w-full h-64 bg-muted rounded mt-4",children:[(0,s.jsx)(h.Ay,{image:y,crop:_,zoom:q,aspect:1,onCropChange:N,onZoomChange:A,onCropComplete:function(e,t){C(t)}}),(0,s.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 flex flex-col items-center",children:[(0,s.jsx)(j,{min:1,max:3,step:.01,value:q,onChange:(e,t)=>A(t),className:"w-1/2"}),(0,s.jsx)("button",{type:"button",className:"mt-2 bg-primary text-primary-foreground px-4 py-2 rounded font-semibold",onClick:M,disabled:O,children:O?(0,s.jsx)(b,{size:20}):"Crop & Upload"})]})]})]}),(0,s.jsx)("button",{className:"bg-primary text-primary-foreground px-4 py-2 rounded font-semibold w-full disabled:opacity-50",type:"submit",disabled:u,children:u?"Saving...":"Save Changes"})]}),(0,s.jsx)("div",{className:"text-center mt-4",children:(0,s.jsx)(p(),{href:"/admin/classes",className:"text-primary hover:underline",children:"Back to Classes"})})]})]})}):(0,s.jsx)(a.AdminAuthGuard,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(n.AdminHeader,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary mb-8 text-center",children:"Edit Class"}),(0,s.jsx)("p",{children:"Loading..."})]})]})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19587:(e,t)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return r}})},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},39857:(e,t,r)=>{Promise.resolve().then(r.bind(r,17276))},49585:(e,t,r)=>{Promise.resolve().then(r.bind(r,54037))},49587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(14985)._(r(64963));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,s.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54037:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/classes/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bababohmbaedio/Dev/tumbleBunnies/src/app/admin/classes/[id]/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},56780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=r(81208);function a(e){let{reason:t,children:r}=e;throw Object.defineProperty(new s.BailoutToCSRError(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return l}});let s=r(60687),a=r(51215),n=r(29294),i=r(19587);function l(e){let{moduleIds:t}=e,r=n.workAsyncStorage.getStore();if(void 0===r)return null;let l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files;l.push(...t)}}return 0===l.length?null:(0,s.jsx)(s.Fragment,{children:l.map(e=>{let t=r.assetPrefix+"/_next/"+(0,i.encodeURIPath)(e);return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,a.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},64963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=r(60687),a=r(43210),n=r(56780),i=r(64777);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},r=(0,a.lazy)(()=>t.loader().then(l)),d=t.loading;function u(e){let l=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,u=o?a.Suspense:a.Fragment,c=t.ssr?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.PreloadChunks,{moduleIds:t.modules}),(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(u,{...o?{fallback:l}:{},children:c})}return u.displayName="LoadableComponent",u}},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,842,208,474,817,121,473],()=>r(10087));module.exports=s})();